# 思维导图 AI 助手 - 快速测试指南

## 🚀 快速开始

### 步骤 1: 启动应用

```bash
# 在项目根目录
./start.sh

# 或分别启动
pnpm dev              # 前端 (localhost:5173)
pnpm dev:backend      # 后端 (localhost:3001)
```

### 步骤 2: 登录系统

使用演示账号登录:
- 邮箱: `demo@ainote.com`
- 密码: `demo123456`

### 步骤 3: 创建思维导图笔记

1. 点击"创建笔记"按钮
2. 在文件类型选择器中选择"思维导图"
3. 点击"确定"

### 步骤 4: 与 AI 助手交互

#### 测试场景 1: 创建思维导图

在 AI 助手中输入:
```
帮我创建一个关于"AI 学习路径"的思维导图,包含以下内容:
- 机器学习基础
- 深度学习
- 自然语言处理
- 计算机视觉
- 项目实战
```

**预期结果**: AI 生成完整的思维导图 JSON

#### 测试场景 2: 发送节点到 AI

1. 在思维导图中选中一个或多个节点
2. 点击"发送到 AI 助手"按钮
3. AI 助手中会显示选中的节点信息

**预期结果**:
- AI 助手输入框显示节点数据
- 可以基于选中节点继续对话

#### 测试场景 3: 从 AI 导入修改

在 AI 助手中输入:
```
请为刚才的思维导图添加更多细节,在每个主要分支下添加 3-4 个子节点
```

等待 AI 生成完成后:
1. 点击"从 AI 导入"按钮
2. 思维导图编辑器自动更新

**预期结果**:
- 思维导图显示新的节点结构
- 数据自动保存到笔记

## ✅ 测试检查清单

### 基础功能
- [ ] 思维导图笔记创建成功
- [ ] AI 助手自动切换到"思维导图助手"
- [ ] 编辑器显示空白思维导图

### AI 生成功能
- [ ] AI 能理解创建思维导图的指令
- [ ] AI 生成的 JSON 格式正确
- [ ] JSON 包含完整的节点结构
- [ ] 节点文本简洁明了

### 数据发送功能
- [ ] 可以选中单个节点
- [ ] 可以选中多个节点
- [ ] "发送到 AI 助手"按钮可点击
- [ ] AI 助手显示结构化的节点信息
- [ ] 完整 JSON 数据被发送

### AI 修改功能
- [ ] AI 能理解优化指令
- [ ] AI 能添加新节点
- [ ] AI 能删除节点
- [ ] AI 能重组结构
- [ ] AI 能优化文本

### 导入功能
- [ ] "从 AI 导入"按钮可点击
- [ ] 成功提取 AI 响应中的 JSON
- [ ] JSON 格式验证通过
- [ ] 思维导图正确更新
- [ ] 数据自动保存

### 错误处理
- [ ] JSON 格式错误时显示提示
- [ ] 导入失败时显示错误信息
- [ ] 网络错误时有相应提示

## 🧪 测试用例

### 测试用例 1: 创建简单思维导图

**输入**:
```
创建一个关于"日常计划"的思维导图,包含:
- 早晨 routine
- 工作任务
- 健身
- 学习
```

**验证点**:
- [ ] JSON 结构正确
- [ ] 包含所有指定主题
- [ ] 每个主题有合理的子节点
- [ ] 导入后显示正常

### 测试用例 2: 优化现有结构

**前置步骤**:
1. 创建思维导图
2. 选中某个节点

**输入**:
```
请为这个节点添加 5 个具体的子节点
```

**验证点**:
- [ ] AI 识别了选中的节点
- [ ] 添加了 5 个子节点
- [ ] 子节点内容相关且合理
- [ ] 导入后结构正确

### 测试用例 3: 重组层级

**输入**:
```
请将这些节点按重要性重新排序,最重要的放在最前面
```

**验证点**:
- [ ] 节点顺序发生变化
- [ ] 顺序符合逻辑
- [ ] 层级关系保持正确

### 测试用例 4: 精简内容

**输入**:
```
请将这些节点的文本简化为关键词,每个不超过 10 个字
```

**验证点**:
- [ ] 节点文本被简化
- [ ] 保留核心含义
- [ ] 文本长度符合要求

### 测试用例 5: 扩展内容

**输入**:
```
请为每个叶子节点添加 2-3 个示例
```

**验证点**:
- [ ] 叶子节点下添加了新节点
- [ ] 示例内容相关
- [ ] 结构清晰不混乱

## 🐛 常见问题排查

### 问题: AI 助手没有自动切换

**检查**:
1. 刷新页面
2. 手动选择"思维导图助手"
3. 查看控制台是否有错误

### 问题: AI 生成的 JSON 无法导入

**检查**:
1. AI 响应是否包含 ` ```json ` 代码块
2. JSON 格式是否正确(可用在线工具验证)
3. 是否包含完整的 `data` 和 `children` 结构

### 问题: 发送到 AI 失败

**检查**:
1. 是否已选中节点
2. 思维导图数据是否有效
3. 浏览器控制台是否有错误

### 问题: 导入后结构不正确

**检查**:
1. 验证 JSON 结构是否符合规范
2. 查看控制台的验证错误信息
3. 尝试让 AI 重新生成

## 📊 性能测试

### 测试不同规模

| 节点数量 | 创建时间 | 导入时间 | AI 响应时间 |
|---------|---------|---------|------------|
| 10      | < 1s    | < 1s    | 2-5s       |
| 50      | < 2s    | < 2s    | 5-10s      |
| 100     | < 5s    | < 3s    | 10-20s     |
| 200     | < 10s   | < 5s    | 20-40s     |

**建议**: 节点数量超过 100 时,建议分批处理

### 测试不同复杂度

| 层级深度 | 创建质量 | 导入成功率 | 推荐使用 |
|---------|---------|-----------|---------|
| 2-3 层  | ⭐⭐⭐⭐⭐  | 100%      | ✅ 推荐 |
| 4-5 层  | ⭐⭐⭐⭐   | 95%       | ✅ 推荐 |
| 6+ 层   | ⭐⭐⭐    | 80%       | ⚠️ 谨慎 |

## 🎯 成功标准

### 必须满足
- ✅ 能够创建至少 10 个节点的思维导图
- ✅ 能够发送选中节点到 AI
- ✅ 能够从 AI 导入修改后的 JSON
- ✅ JSON 格式验证 100% 通过
- ✅ 导入成功率 > 95%

### 期望满足
- ✅ AI 响应时间 < 10 秒(50 节点)
- ✅ 导入时间 < 2 秒
- ✅ 节点内容质量高,相关性强
- ✅ 支持多次迭代优化

### 可选满足
- ✅ 支持中英文混合内容
- ✅ 支持特殊字符和表情符号
- ✅ 能够处理复杂的层级结构

## 📝 测试报告模板

```markdown
## 测试日期: 2024-XX-XX
## 测试人员: [姓名]

### 测试环境
- 操作系统: [Windows/Mac/Linux]
- 浏览器: [Chrome/Firefox/Safari] 版本号
- 应用版本: [版本号]

### 测试结果

#### 功能测试
- 创建思维导图: ✅/❌
- 发送节点到 AI: ✅/❌
- AI 生成内容: ✅/❌
- 从 AI 导入: ✅/❌
- 数据保存: ✅/❌

#### 性能测试
- 创建 50 节点耗时: [X] 秒
- AI 响应时间: [X] 秒
- 导入时间: [X] 秒

#### 发现的问题
1. [问题描述]
2. [问题描述]

### 总体评价
- 功能完整性: [评分 1-5]
- 易用性: [评分 1-5]
- 稳定性: [评分 1-5]
- 性能: [评分 1-5]

### 改进建议
1. [建议]
2. [建议]
```

## 🎓 学习资源

### 推荐的测试提示词

**新手友好**:
```
创建一个简单的[主题]思维导图,包含 3-5 个主要分支
```

**进阶测试**:
```
创建一个关于[复杂主题]的思维导图,要求:
1. 至少 3 个层级
2. 每个分支至少 3 个子节点
3. 使用简洁的关键词
```

**压力测试**:
```
创建一个关于[广泛主题]的思维导图,包含 20+ 个节点,覆盖多个方面
```

**边界测试**:
```
创建一个 6 层深度的思维导图,测试系统的层级处理能力
```

---

## 🎉 测试完成

如果所有测试用例都通过,说明思维导图 AI 助手集成功能已经完善!

如果有任何问题,请查看:
- 控制台错误日志
- 网络请求记录
- [完整集成文档](./MINDMAP_AI_INTEGRATION.md)
