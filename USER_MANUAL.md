# AiNote 用户使用说明书

欢迎使用 AiNote 智能笔记应用！本手册将帮助您快速上手并充分利用所有功能。

---

## 📖 目录

1. [快速入门](#快速入门)
2. [用户注册与登录](#用户注册与登录)
3. [笔记管理](#笔记管理)
4. [多编辑器使用](#多编辑器使用)
5. [AI 助手功能](#ai-助手功能)
6. [分类与标签](#分类与标签)
7. [搜索功能](#搜索功能)
8. [版本历史](#版本历史)
9. [回收站](#回收站)
10. [设置中心](#设置中心)
11. [数据同步](#数据同步)
12. [快捷键大全](#快捷键大全)
13. [常见问题](#常见问题)

---

## 🚀 快速入门

### 访问应用

根据您的部署环境，通过以下地址访问 AiNote：

#### 本地访问
- **应用地址**: http://localhost:3100
- **演示账号**:
  - 邮箱：`demo@ainote.com`
  - 密码：`demo123456`

#### 局域网访问
- **应用地址**: http://192.168.201.97:3100
- 允许同一网络下的其他设备访问

> **提示**: 首次使用建议先体验演示账号，熟悉功能后再注册自己的账号。

### 界面概览

```
┌─────────────────────────────────────────────────┐
│  📝 AiNote              🔔  👤    ⚙️           │ 顶部栏
├──────────┬──────────────────────────────────────┤
│          │                                       │
│  侧边栏   │           主内容区                   │
│          │                                       │
│  📁 全部  │  ┌──────────────────────────────┐   │
│  📂 分类  │  │ 笔记标题                     │   │
│  🏷️ 标签  │  │ ───────────────────────────  │   │
│  ⭐ 收藏  │  │                            │   │
│  🗑️ 回收  │  │     笔记内容编辑区           │   │
│          │  │                            │   │
│          │  └──────────────────────────────┘   │
│          │                                       │
│  🤖 AI   │  ┌──────────────────────────────┐   │
│  助手    │  │ AI 对话区域                  │   │
│          │  └──────────────────────────────┘   │
└──────────┴──────────────────────────────────────┘
```

---

## 👤 用户注册与登录

### 注册新账号

1. 打开应用，点击登录页面的 **"注册"** 按钮
2. 填写注册信息：
   - **邮箱**: 用于登录的邮箱地址
   - **用户名**: 显示名称
   - **密码**: 至少 6 位字符
3. 点击 **"注册"** 完成注册
4. 自动登录并进入笔记列表

### 登录

1. 在登录页面输入邮箱和密码
2. 点击 **"登录"** 按钮
3. 登录成功后跳转到笔记列表

### 退出登录

点击右上角头像 → 选择 **"退出登录"**

---

## 📝 笔记管理

### 创建笔记

1. 点击右上角 **"+ 新建笔记"** 按钮
2. 选择笔记类型：
   - 📝 **Markdown** - 适合文档编写、技术博客
   - 📄 **富文本** - 适合日常笔记、格式化文本
   - 💻 **代码** - 适合代码片段、技术文档
   - 🧠 **思维导图** - 适合头脑风暴、知识梳理
   - 📊 **DrawIO** - 适合流程图、架构图
3. 输入笔记标题
4. 选择分类（可选）
5. 点击 **"确定"** 创建笔记

### 编辑笔记

1. 在笔记列表中点击笔记打开
2. 根据笔记类型，使用对应的编辑器：
   - **Markdown 编辑器**: 支持 Markdown 语法，实时预览
   - **富文本编辑器**: 所见即所得，工具栏操作
   - **代码编辑器**: 多语言支持，语法高亮
   - **思维导图编辑器**: 可视化编辑，拖拽操作
   - **DrawIO 编辑器**: 流程图绘制

### 保存笔记

- **自动保存**: 编辑 3 秒后自动保存
- **手动保存**: 使用快捷键 `Ctrl/Cmd + S`
- 保存状态会在右上角显示

### 删除笔记

1. 在笔记列表中，点击笔记的删除图标
2. 确认删除
3. 笔记会移至回收站

### 收藏笔记

点击笔记标题旁的 ⭐ 图标收藏常用笔记

---

## ✏️ 多编辑器使用

### Markdown 编辑器

**适用场景**: 技术文档、博客文章、结构化内容

**功能特点**:
- 实时预览
- 语法高亮
- GFM 支持（表格、删除线、任务列表等）
- 快捷键支持

**常用语法**:
```markdown
# 一级标题
## 二级标题

**粗体** *斜体* ~~删除线~~

- 无序列表
1. 有序列表

[链接](https://example.com)
![图片](https://example.com/image.jpg)

`代码`

\```
代码块
\```

| 表头 | 表头 |
| ---- | ---- |
| 内容 | 内容 |
```

**快捷键**:
- `Ctrl/Cmd + B` - 粗体
- `Ctrl/Cmd + I` - 斜体
- `Ctrl/Cmd + K` - 插入链接

### 富文本编辑器

**适用场景**: 日常笔记、格式化文本、图文混排

**功能特点**:
- 所见即所得
- 工具栏操作
- 图片粘贴上传
- 丰富格式支持

**工具栏功能**:
- 标题样式（H1-H6）
- 粗体、斜体、下划线
- 列表（有序、无序）
- 引用块
- 代码块
- 链接、图片
- 文本颜色、高亮
- 对齐方式

### 代码编辑器

**适用场景**: 代码片段、技术文档、编程学习

**功能特点**:
- VS Code 同款体验
- 多语言支持
- 智能提示
- 代码格式化
- 多标签页

**支持语言**:
- JavaScript / TypeScript
- Python
- Java
- C/C++/C#
- Go
- Rust
- HTML/CSS
- SQL
- JSON
- 等等...

### 思维导图编辑器

**适用场景**: 头脑风暴、知识梳理、项目规划

**功能特点**:
- 可视化节点编辑
- 拖拽操作
- 一键收起/展开
- 多种布局方式
- 导出功能

**基本操作**:
1. **添加节点**:
   - 选中节点 → 点击工具栏 "+" 按钮
   - 双击节点背景
   - 使用 Tab 键添加子节点

2. **编辑节点**:
   - 双击节点文本
   - 选中后按 Enter

3. **删除节点**:
   - 选中节点 → 按 Delete 键
   - 点击工具栏删除按钮

4. **移动节点**:
   - 拖拽节点到新位置
   - 拖拽到其他节点下成为子节点

5. **收起/展开**:
   - 点击节点前的 +/- 按钮
   - 工具栏收起/展开按钮

**导出格式**:
- PNG 图片
- SVG 矢量图
- JSON 数据

### DrawIO 图表编辑器

**适用场景**: 流程图、架构图、UML 图、网络拓扑图

**功能特点**:
- 丰富的图形库
- 拖拽绘制
- 连线功能
- 多种图表类型

**图表类型**:
- 流程图
- UML 图（类图、时序图等）
- ER 图
- 网络拓扑图
- 组织架构图
- 思维导图

**基本操作**:
1. **添加图形**: 从左侧图形库拖拽到画布
2. **连接图形**: 点击连接点，拖拽到目标图形
3. **编辑文本**: 双击图形输入文本
4. **调整样式**: 右侧样式面板
5. **导出**: 文件 → 导出为 → 选择格式

---

## 🤖 AI 助手功能

### AI 助手概览

AiNote 内置多个专业 AI 助手，每个助手都针对特定场景优化：

| 助手名称 | 适用场景 | 特点 |
|---------|---------|------|
| **通用助手** | 通用问答、内容总结、翻译 | 全能型助手 |
| **Markdown 助手** | Markdown 文档优化 | 格式优化、结构建议 |
| **富文本助手** | 内容润色、排版建议 | 文档美化 |
| **思维导图助手** | 思维导图生成和优化 | 结构化输出 |
| **DrawIO 助手** | 流程图生成 | 图表结构设计 |

### 基础对话

1. 打开 AI 助手面板（右侧）
2. 在输入框中输入问题
3. 点击发送或按 `Enter` 键
4. AI 实时流式返回响应
5. 支持中断和重新生成

### 发送编辑器内容到 AI

**文本编辑器（Markdown/富文本/代码）**:
1. 在编辑器中选中要发送的文本
2. 自动填充到 AI 助手输入框
3. 附加你的问题
4. 发送消息

**思维导图编辑器**:
1. 选中思维导图节点
2. 点击节点旁的 "发送" 按钮
3. 节点内容自动填充到 AI 输入框
4. AI 可以：
   - 生成思维导图 JSON
   - 添加子节点
   - 重组结构
   - 优化布局

**DrawIO 编辑器**:
1. 选中 DrawIO 图形元素
2. 点击工具栏的 "发送到 AI" 按钮
3. AI 可以：
   - 生成流程图 XML
   - 优化图表结构
   - 建议连线方案

### 导入 AI 响应到编辑器

**Markdown/富文本/代码**:
- 点击 AI 响应下方的 "复制" 按钮
- 粘贴到编辑器

**思维导图**:
- 如果 AI 返回的是思维导图 JSON
- 点击 "导入到编辑器" 按钮
- 自动更新思维导图结构

**DrawIO**:
- 如果 AI 返回的是 DrawIO XML
- 点击 "导入到编辑器" 按钮
- 自动更新图表内容

### 创建自定义 AI 助手

1. 进入 AI 助手面板
2. 点击 "创建助手" 按钮
3. 填写助手信息：
   - **名称**: 助手名称（如 "翻译助手"）
   - **描述**: 功能描述（如 "专门用于中英文翻译"）
   - **System Prompt**: 系统提示词，定义助手行为
   - **模型**: 选择使用的 AI 模型
   - **参数**:
     - Temperature (0-2): 创造性程度
     - Max Tokens: 最大输出长度
     - Top P (0-1): 采样参数
   - **图标**: 选择头像图标
   - **公开**: 设为公开让其他用户使用
4. 点击 "保存"

### 切换 AI 模型

1. 进入设置页面 → 模型管理
2. 在列表中选择要使用的模型
3. 或在 AI 助手面板中切换

### AI 使用技巧

**优质提示词**:
- 明确任务目标
- 提供充分上下文
- 指定输出格式
- 给出示例

**示例**:
```
请帮我优化以下 Markdown 文档的结构：
[选中内容]

要求：
1. 保持原有信息
2. 优化标题层级
3. 添加必要的列表和表格
4. 使用 Markdown 格式输出
```

---

## 📂 分类与标签

### 分类管理

**创建分类**:
1. 点击侧边栏 "分类" → "管理分类"
2. 点击 "添加分类"
3. 输入分类名称
4. 选择图标和颜色
5. 点击 "确定"

**编辑分类**:
1. 在分类管理页面，点击编辑图标
2. 修改名称、图标、颜色
3. 保存更改

**删除分类**:
1. 在分类管理页面，点击删除图标
2. 确认删除
3. 分类下的笔记会变为"未分类"

**给笔记分类**:
- 创建笔记时选择分类
- 编辑笔记时更改分类
- 在笔记列表中拖拽到分类

### 标签管理

**创建标签**:
1. 打开笔记编辑页面
2. 在右侧标签区域输入标签名称
3. 按 Enter 确认
4. 自动保存

**添加标签到笔记**:
- 在标签区域选择已有标签
- 或输入新标签名称创建

**管理标签**:
1. 点击侧边栏 "标签"
2. 查看所有标签
3. 点击标签查看相关笔记
4. 点击编辑图标修改标签名称或颜色

**删除标签**:
- 从笔记中移除标签
- 或在标签管理页面删除

---

## 🔍 搜索功能

### 全文搜索

1. 点击顶部搜索框
2. 输入搜索关键词
3. 实时显示匹配结果

**搜索范围**:
- 笔记标题
- 笔记内容
- 分类名称
- 标签名称

### 高级搜索

**搜索语法**:
- `关键词` - 包含关键词的笔记
- `title:关键词` - 标题包含关键词
- `tag:标签名` - 包含指定标签
- `category:分类名` - 在指定分类中搜索

**组合搜索**:
- `关键词 tag:重要` - 包含"关键词"且有"重要"标签
- `title:React category:技术` - 标题包含"React"且在"技术"分类中

### 搜索结果操作

- 点击结果直接打开笔记
- 支持键盘导航（上下箭头）
- ESC 关闭搜索

---

## 🕐 版本历史

### 查看版本历史

1. 打开笔记编辑页面
2. 点击右上角 "..." 菜单
3. 选择 "版本历史"
4. 查看所有历史版本

### 恢复历史版本

1. 在版本历史列表中选择版本
2. 查看版本详情
3. 点击 "恢复此版本"
4. 确认恢复

**版本信息**:
- 版本号
- 保存时间
- 修改内容预览

### 版本自动创建

- 每次保存笔记时自动创建版本
- 保留最近 50 个版本
- 超过限制自动删除旧版本

---

## 🗑️ 回收站

### 查看回收站

1. 点击侧边栏 "回收站"
2. 查看所有已删除的笔记

### 恢复笔记

1. 在回收站中选择笔记
2. 点击 "恢复" 按钮
3. 笔记恢复到原来的分类

### 永久删除

1. 在回收站中选择笔记
2. 点击 "永久删除"
3. 确认删除
4. 笔记将无法恢复

**自动清理**:
- 回收站中的笔记保留 30 天
- 超过 30 天自动永久删除

---

## ⚙️ 设置中心

### 账号设置

**个人信息**:
- 修改用户名
- 更换头像
- 修改邮箱

**修改密码**:
1. 输入当前密码
2. 输入新密码
3. 确认新密码
4. 点击 "保存"

### 主题设置

**切换主题**:
- **亮色模式**: 温暖米白背景，适合白天使用
- **暗黑模式**: 深色背景，护眼省电

**切换方式**:
1. 进入设置页面
2. 选择 "主题设置"
3. 选择主题
4. 或点击顶部主题切换图标

### 模型管理

**添加模型**:
1. 进入设置 → 模型管理
2. 点击 "添加模型"
3. 填写配置：
   - **模型名称**: 如 "GPT-4"
   - **API 端点**: 如 `https://api.openai.com/v1`
   - **API Key**: 你的 API 密钥
   - **模型 ID**: 如 `gpt-4`
   - **参数**: temperature、maxTokens、topP
4. 点击 "保存"

**支持的模型**:
- OpenAI (GPT-3.5/GPT-4)
- Anthropic (Claude)
- Ollama (本地模型)
- LM Studio (本地模型)
- 智谱 GLM
- 其他兼容 OpenAI API 的模型

**测试连接**:
- 点击模型列表的 "测试" 按钮
- 查看连接状态和响应时间

**使用统计**:
- 查看每个模型的使用次数
- Token 消耗统计
- 成功/失败率

### AI 助手管理

**查看所有助手**:
1. 进入设置 → AI 助手
2. 查看系统助手和自定义助手

**编辑助手**:
1. 点击助手卡片
2. 修改名称、描述、提示词
3. 调整参数
4. 保存更改

**删除助手**:
1. 点击删除按钮
2. 确认删除
3. 系统内置助手不可删除

### 数据管理

**查看同步状态**:
1. 进入设置 → 数据同步
2. 查看本地和云端数据状态
3. 查看待同步数据量

**手动同步**:
- 点击 "立即同步"
- 拉取云端最新数据
- 推送本地数据到云端

**导出数据**:
- 导出所有笔记为 JSON
- 导出特定分类的笔记
- 导出 AI 对话记录

---

## 💾 数据同步

### 离线优先架构

AiNote 采用**离线优先**设计：

**工作原理**:
1. 所有操作优先保存到本地（IndexedDB）
2. UI 立即响应，无需等待网络
3. 后台自动同步到云端（PostgreSQL）
4. 网络恢复时智能合并数据

**优势**:
- ✅ 离线也能正常使用
- ✅ 操作响应速度快
- ✅ 数据安全有保障
- ✅ 多设备自动同步

### 自动同步

**同步时机**:
- 网络恢复时
- 每 30 秒自动检查
- 手动点击同步

**同步策略**:
- 上传：本地有新数据时上传到服务器
- 下载：服务器有新数据时下载到本地
- 合并：基于 `updatedAt` 时间戳，保留最新版本

### 同步状态查看

**查看方式**:
1. 进入设置 → 数据同步
2. 查看同步状态：
   - ✅ 已同步
   - 🔄 同步中
   - ⚠️ 同步失败
   - 📡 离线

**待同步数据**:
- 查看有多少数据待同步
- 查看失败原因
- 手动重试同步

### 冲突解决

**冲突处理规则**:
- 使用 `updatedAt` 时间戳
- 保留最新修改的版本
- 旧版本会被覆盖

**手动解决**:
1. 查看冲突详情
2. 选择保留本地或服务器版本
3. 或手动合并内容

---

## ⌨️ 快捷键大全

### 全局快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl/Cmd + N` | 创建新笔记 |
| `Ctrl/Cmd + S` | 保存当前笔记 |
| `Ctrl/Cmd + F` | 搜索笔记 |
| `Ctrl/Cmd + B` | 切换侧边栏 |
| `Ctrl/Cmd + /` | 切换 AI 助手 |
| `Ctrl/Cmd + Shift + A` | 发送选中内容到 AI |
| `ESC` | 关闭弹窗/退出搜索 |

### Markdown 编辑器

| 快捷键 | 功能 |
|--------|------|
| `Ctrl/Cmd + B` | 粗体 |
| `Ctrl/Cmd + I` | 斜体 |
| `Ctrl/Cmd + K` | 插入链接 |
| `Ctrl/Cmd + Shift + K` | 插入代码块 |
| `Ctrl/Cmd + Shift + .` | 有序列表 |
| `Ctrl/Cmd + Shift + ,` | 无序列表 |

### 思维导图编辑器

| 快捷键 | 功能 |
|--------|------|
| `Tab` | 添加子节点 |
| `Enter` | 添加兄弟节点 |
| `Delete/Backspace` | 删除节点 |
| `Space` | 编辑节点 |
| `↑ ↓ ← →` | 移动选择 |
| `Ctrl/Cmd + +` | 放大 |
| `Ctrl/Cmd + -` | 缩小 |

### AI 助手

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Shift + Enter` | 换行 |
| `Ctrl/Cmd + ↑` | 上一轮对话 |
| `Ctrl/Cmd + ↓` | 下一轮对话 |

---

## ❓ 常见问题

### 登录相关

**Q: 忘记密码怎么办？**
A: 目前请联系管理员重置密码，或使用演示账号体验。

**Q: 为什么登录失败？**
A: 检查：
- 邮箱和密码是否正确
- 网络连接是否正常
- 后端服务是否启动

### 笔记编辑

**Q: 为什么没有自动保存？**
A: 检查：
- 是否已登录
- 网络连接是否正常
- 浏览器是否支持 IndexedDB
- 查看控制台错误信息

**Q: 如何批量删除笔记？**
A: 目前暂不支持批量操作，请逐个删除。

**Q: 笔记内容有字符限制吗？**
A: 没有明确的字符限制，但建议单篇笔记不超过 10 万字以保证性能。

### AI 助手

**Q: AI 没有响应怎么办？**
A: 检查：
- API Key 是否配置正确
- API 配额是否用完
- 网络连接是否正常
- 模型服务是否可用

**Q: 如何提高 AI 响应质量？**
A: 建议：
- 明确任务目标
- 提供充分上下文
- 指定输出格式
- 给出示例
- 调整模型参数（Temperature）

**Q: AI 消耗多少 Token？**
A: 在设置 → 模型管理 → 使用统计中查看详细数据。

### 数据同步

**Q: 离线时数据会丢失吗？**
A: 不会。所有数据优先保存到本地，联网后自动同步。

**Q: 如何查看同步状态？**
A: 进入设置 → 数据同步，查看实时同步状态。

**Q: 多设备登录数据会冲突吗？**
A: 系统会自动合并数据，保留最新修改的版本。

### 性能问题

**Q: 应用加载缓慢怎么办？**
A: 建议：
- 清理浏览器缓存
- 检查网络速度
- 关闭不必要的浏览器标签
- 使用最新版本的浏览器

**Q: 编辑大文件卡顿怎么办？**
A: 建议：
- 拆分为多个小文件
- 清理版本历史
- 使用更轻量的编辑器（如 Markdown）

### 浏览器兼容

**Q: 支持哪些浏览器？**
A: 推荐：
- Chrome 90+
- Edge 90+
- Firefox 88+
- Safari 14+

**Q: 移动端可以使用吗？**
A: 应用支持响应式设计，可以在移动浏览器中使用，但推荐使用桌面端获得最佳体验。

---

## 📞 获取帮助

### 文档资源

- **快速开始**: [README.md](./README.md)
- **开发文档**: [CLAUDE.md](./CLAUDE.md)
- **部署指南**: [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)

### 问题反馈

如遇到问题或建议，请通过以下方式反馈：

1. **GitHub Issues**: [提交问题](https://github.com/yourusername/ainote/issues)
2. **邮件支持**: support@ainote.com
3. **用户社区**: [加入讨论](https://github.com/yourusername/ainote/discussions)

### 贡献指南

欢迎贡献代码、文档或提出建议！

详见：[README.md - 贡献指南](./README.md#🤝-贡献指南)

---

## 🎯 使用技巧

### 高效笔记技巧

1. **使用模板**: 为常用场景创建笔记模板
2. **合理分类**: 建立清晰的分类体系
3. **善用标签**: 用标签进行跨分类关联
4. **定期整理**: 清理不需要的笔记和版本
5. **快捷键**: 熟练使用快捷键提升效率

### AI 使用技巧

1. **明确需求**: 清晰描述你的需求
2. **提供上下文**: 让 AI 了解更多背景信息
3. **指定格式**: 告诉 AI 你期望的输出格式
4. **迭代优化**: 根据结果调整提示词
5. **选择模型**: 不同任务选择适合的模型

### 思维导图技巧

1. **层级清晰**: 不要超过 5 层
2. **关键词**: 使用简洁的关键词
3. **颜色编码**: 用颜色区分不同主题
4. **图标使用**: 用图标增强视觉效果
5. **定期整理**: 及时调整和优化结构

---

## 📝 更新日志

### 版本 1.0.0

**核心功能**:
- ✅ 5 种编辑器支持
- ✅ AI 深度集成
- ✅ 离线优先架构
- ✅ 版本历史
- ✅ 回收站
- ✅ 分类标签
- ✅ 全文搜索
- ✅ 暗黑模式

**计划中功能**:
- 🔜 移动端 App
- 🔜 实时协作
- 🔜 更多 AI 模型
- 🔜 笔记分享
- 🔜 附件管理增强

---

<div align="center">

**感谢使用 AiNote！**

如有任何问题或建议，欢迎随时反馈。

Made with ❤️ by AiNote Team

</div>
